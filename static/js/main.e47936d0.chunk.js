(this.webpackJsonpmobx04=this.webpackJsonpmobx04||[]).push([[0],{20:function(e,t,n){},28:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(14),o=n.n(s);n(20),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,c,u,l,p,h,g,m,b,y,d,f,O,v,j,S,k,I,C,w,E,x,P,N,H=n(4),B=n(5),M=n(7),_=n(6),L=n(8),z=n(2),R=n(16),D=n.n(R),q=Object(z.b)("store")(i=Object(z.c)(i=function(e){function t(e){var n;return Object(H.a)(this,t),(n=Object(M.a)(this,Object(_.a)(t).call(this,e))).onChangeHandler=function(e){n.props.store.setTerm(e.target.value)},n.search=function(){n.setState({isSearchVisible:!1}),n.props.store.resetCurrentSong(),console.log("Searching"),n.props.store.search()},n.onKeyUpHandler=function(e){console.log(n.props),13===e.keyCode&&n.props.store.term&&n.search()},n.searchButtonHandler=function(){var e=n.state.isSearchVisible;n.props.store.term&&(e?n.search():n.setState({isSearchVisible:!0}))},n.state={isSearchVisible:!1},n}return Object(L.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store,n=t.term,r=D()({search__input:!0,"search__input--hide":!this.state.isSearchVisible&&"compleated"===t.status});return a.a.createElement("nav",null,a.a.createElement("div",{className:"left"}),a.a.createElement("div",{className:"right"},a.a.createElement("input",{className:r,type:"text",value:n,onChange:this.onChangeHandler,onKeyUp:this.onKeyUpHandler,disabled:"pending"===t.status}),a.a.createElement("i",{className:"material-icons search",onClick:function(){return e.searchButtonHandler()}},"search")))}}]),t}(a.a.PureComponent))||i)||i,T=n(1),V="next",W="prev",A=Object(z.b)("store")(c=Object(z.c)(c=function(e){function t(e){var n;return Object(H.a)(this,t),(n=Object(M.a)(this,Object(_.a)(t).call(this,e))).cancelMusicChange=null,n.step=function(){var e=n.props.store.songInstance;if(e&&e.playing()){var t=e.seek();n.progressRef.current.style.width=(t/e.duration()*100||0)+"%",requestAnimationFrame(n.step)}},n.changeProgressBar=function(){n.props.store.songInstance},n.playButtonHandler=function(){n.props.store.songInstance.play(),n.props.store.setSongPlayingStatus(!0)},n.pauseButtonHandler=function(){n.props.store.songInstance.pause(),n.props.store.setSongPlayingStatus(!1)},n.musicChangeHandler=function(e){var t=n.props.store,r=t.currentSongIndex;switch(e){case V:r=t.currentSongIndex+1;break;case W:r=t.currentSongIndex-1}r<0||r>=t.playList.length||(t.songInstance.stop(),t.setCurrentSongIndex(r),t.setCurrentSong(r,null),t.songInstance.play(),t.setSongPlayingStatus(!0),n.setState({isPlaying:!0}))},n.muteButtonHandler=function(){n.setState((function(e){return{isMuted:!e.isMuted}})),n.props.store.songInstance.mute(n.state.isMuted)},n.resetButtonHandler=function(){n.props.store.songInstance.playing()&&n.props.store.songInstance.seek(0)},n.seekHandler=function(e){var t=n.props.store.songInstance;t.playing()&&t.seek(t.duration()*e)},n._playButtonRef=a.a.createRef(),n.state={isPlaying:!1,isMuted:!0},n.songId=null,n.trackMusicAvailability(),n.progressRef=a.a.createRef(),n}return Object(L.a)(t,e),Object(B.a)(t,[{key:"trackMusicAvailability",value:function(){var e=this;this.cancelMusicChange=Object(T.o)((function(){return e.props.store.currentSong}),(function(t){var n=e.props.store;e.progressRef.current.style.width="0%",n.setMusicInstance(),n.isChoosen&&e.playButtonHandler(),n.songInstance.on("play",(function(){requestAnimationFrame(e.step),e.setState((function(){return{isPlaying:!0}}))})),n.songInstance.on("pause",(function(){e.setState((function(){return{isPlaying:!1}}))})),n.songInstance.on("end",(function(){console.log("end of song listener"),e.musicChangeHandler(V)}))})),Object(T.o)((function(){return e.props.store.playList}),(function(){e.props.store.songInstance&&e.props.store.songInstance.stop(),e.setState((function(){return{isPlaying:!1}}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isPlaying,r=t.isMuted,s=this.props.store.currentSong,o=this.props.store,i=o.currentSongIndex,c=void 0===i?0:i,u=o.playList,l=void 0===u?[]:u;return a.a.createElement("div",{className:"player-ui"},a.a.createElement("div",{className:"title"},a.a.createElement("h3",{className:"promo-title"},s?s.title:"")),a.a.createElement("div",{className:"small"},a.a.createElement("i",{className:"material-icons",onClick:function(){return e.resetButtonHandler()}},"replay"),a.a.createElement("p",null,s?s.artist.name:""),a.a.createElement("i",{className:"material-icons",onClick:function(){return e.muteButtonHandler()}},"volume_",r?"up":"off")),a.a.createElement("div",{className:"progress",onClick:function(t){return e.seekHandler(t.clientX/window.innerWidth)}},a.a.createElement("div",{className:"played",ref:this.progressRef,onClick:function(e){return console.log(e)}})),a.a.createElement("div",{className:"controls"},a.a.createElement("i",{className:"material-icons",onClick:function(){return e.musicChangeHandler(W)}},"skip_previous"),n?a.a.createElement("i",{className:"material-icons",onClick:this.pauseButtonHandler},"pause"):a.a.createElement("i",{className:"material-icons",ref:this._playButtonRef,onClick:this.playButtonHandler},"play_arrow"),a.a.createElement("i",{className:c!==l.length-1?"material-icons":"material-icons material-icons__disable",onClick:function(){return e.musicChangeHandler(V)}},"skip_next")))}},{key:"componentWillUnmount",value:function(){this.cancelMusicChange()}}]),t}(a.a.PureComponent))||c)||c,U=Object(z.b)("store")(u=Object(z.c)(u=function(e){function t(){var e;return Object(H.a)(this,t),(e=Object(M.a)(this,Object(_.a)(t).call(this))).playButtonHandler=function(){var t=e.props,n=t.store,r=t.index;n.chooseSong(r),n.songInstance.playing()&&n.currentSongIndex===r?(n.songInstance.pause(),n.setSongPlayingStatus(!1)):(n.songInstance.play(),n.setSongPlayingStatus(!0))},e.state={isPlaying:!1},e}return Object(L.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.index,s=D()({"material-icons":!0,"play-button":!0,red600:n.currentSongIndex===r});return a.a.createElement("div",{className:"state"},a.a.createElement("i",{className:s,onClick:function(){return e.playButtonHandler()}},n.currentSongIndex===r&&n.isPlaying?"pause":"play_arrow"))}}]),t}(a.a.PureComponent))||u)||u,K=Object(z.b)("store")(l=Object(z.c)(l=function(e){function t(){return Object(H.a)(this,t),Object(M.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(B.a)(t,[{key:"artistNameHandler",value:function(e){this.props.store.resetCurrentSong(),this.props.store.search(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.song,r=t.index,s=(t.store,n.title),o=n.artist;return a.a.createElement("div",{className:"song"},a.a.createElement("div",{className:"info"},a.a.createElement("img",{className:"img second",alt:s,src:n.album.cover_small,width:"60",height:"60"}),a.a.createElement("div",{className:"titles"},a.a.createElement("h5",null,s||"no title"),a.a.createElement("p",{className:"artist-name",onClick:function(t){return e.artistNameHandler(t.target.innerText)}},o.name?o.name:"no name"))),a.a.createElement(U,{index:r}))}}]),t}(a.a.PureComponent))||l)||l,X=n(52),F=Object(z.b)("store")(p=Object(z.c)(p=function(e){function t(){return Object(H.a)(this,t),Object(M.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.store,t=e.isEmpty,n=e.playList,r=e.status;return a.a.createElement("div",{className:"music"},t&&"pending"===r?a.a.createElement(X.a,{variant:"query"}):null,t&&"compleated"===r?a.a.createElement("p",{className:"result"},"No results found"):null,n.map((function(e,t){return t>0?a.a.createElement(K,{key:e.id,index:t,song:e}):null})))}}]),t}(a.a.PureComponent))||p)||p,J=Object(z.b)("store")(h=Object(z.c)(h=function(e){function t(){return Object(H.a)(this,t),Object(M.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e={backgroundImage:this.props.store.currentSong?"url(".concat(this.props.store.currentSong.album.cover_medium,")"):""};return a.a.createElement("div",{className:"player"},a.a.createElement("div",{className:"cover",style:e}),a.a.createElement(q,null),a.a.createElement(A,null),a.a.createElement("div",{className:"btn"}),a.a.createElement(F,null))}}]),t}(a.a.PureComponent))||h)||h,$=n(9),G=n.n($),Q=n(12),Y=n(10),Z=n(3),ee=(n(39),n(40),"https://cors-anywhere.herokuapp.com/"),te="".concat(ee,"https://api.deezer.com/"),ne=function(){var e=Object(Q.a)(G.a.mark((function e(t){var n,r,a=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"search?q=",e.next=3,re("".concat(te).concat(n).concat(t,"&&index=0&limit=10"));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(Q.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});case 2:return n=e.sent,r=n.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=n(17),se=function e(t,n){var r=this;Object(H.a)(this,e),this.setPlayer=function(){var e=new ae.Howl({src:[r.songSrc]});return r.songInstance=e,e},this.step=function(){var e=r.songInstance.seek()||0;console.log(e)},this.index=t,this.songSrc=n,this.songInstance=null},oe=new(g=T.f.bound,m=T.f.bound,b=T.f.bound,y=T.f.bound,d=T.f.bound,f=T.f.bound,O=T.f.bound,v=T.f.bound,j=function(){function e(){Object(H.a)(this,e),Object(Y.a)(this,"term",S,this),Object(Y.a)(this,"artist",k,this),Object(Y.a)(this,"playList",I,this),Object(Y.a)(this,"status",C,this),Object(Y.a)(this,"currentSong",w,this),Object(Y.a)(this,"currentSongIndex",E,this),Object(Y.a)(this,"songInstance",x,this),Object(Y.a)(this,"isChoosen",P,this),Object(Y.a)(this,"isPlaying",N,this),this.search()}return Object(B.a)(e,[{key:"setSongPlayingStatus",value:function(e){this.isPlaying=e}},{key:"setCurrentSongIndex",value:function(e){this.currentSongIndex=e}},{key:"setCurrentSong",value:function(e,t){if(e>=0){var n=this.playList[e];return this.currentSong=n}var r=this.playList.find((function(e){return e.id===t}));return this.currentSong=r}},{key:"chooseSong",value:function(e){this.currentSongIndex!==e&&(this.songInstance.stop(),this.setCurrentSongIndex(e),this.setCurrentSong(e),this.isChoosen=!0)}},{key:"setMusicInstance",value:function(){var e=new se(this.currentSongIndex,this.currentSong.preview);return this.songInstance=e.setPlayer()}},{key:"resetCurrentSong",value:function(){try{this.songInstance.stop(),this.songInstance=null,this.currentSongIndex=0}catch(e){console.log(e)}}},{key:"isEmpty",get:function(){return 0===this.playList.length}}]),Object(B.a)(e,[{key:"setTerm",value:function(e){e!==this.term&&(this.term=e)}},{key:"search",value:function(){var e=Object(Q.a)(G.a.mark((function e(){var t,n,r=this,a=arguments;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:this.term){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.status="pending",e.next=7,ne(t);case 7:n=e.sent,Object(T.p)((function(){r.playList=n.data,r.status="compleated",r.currentSong=n.data[0],console.log("seted cur song")})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),S=Object(Z.a)(j.prototype,"term",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"adele"}}),k=Object(Z.a)(j.prototype,"artist",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=Object(Z.a)(j.prototype,"playList",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=Object(Z.a)(j.prototype,"status",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=Object(Z.a)(j.prototype,"currentSong",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=Object(Z.a)(j.prototype,"currentSongIndex",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=Object(Z.a)(j.prototype,"songInstance",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(Z.a)(j.prototype,"isChoosen",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Object(Z.a)(j.prototype,"isPlaying",[T.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(Z.a)(j.prototype,"isEmpty",[T.g],Object.getOwnPropertyDescriptor(j.prototype,"isEmpty"),j.prototype),Object(Z.a)(j.prototype,"setSongPlayingStatus",[g],Object.getOwnPropertyDescriptor(j.prototype,"setSongPlayingStatus"),j.prototype),Object(Z.a)(j.prototype,"setCurrentSongIndex",[m],Object.getOwnPropertyDescriptor(j.prototype,"setCurrentSongIndex"),j.prototype),Object(Z.a)(j.prototype,"setCurrentSong",[b],Object.getOwnPropertyDescriptor(j.prototype,"setCurrentSong"),j.prototype),Object(Z.a)(j.prototype,"chooseSong",[y],Object.getOwnPropertyDescriptor(j.prototype,"chooseSong"),j.prototype),Object(Z.a)(j.prototype,"setMusicInstance",[d],Object.getOwnPropertyDescriptor(j.prototype,"setMusicInstance"),j.prototype),Object(Z.a)(j.prototype,"resetCurrentSong",[f],Object.getOwnPropertyDescriptor(j.prototype,"resetCurrentSong"),j.prototype),Object(Z.a)(j.prototype,"setTerm",[O],Object.getOwnPropertyDescriptor(j.prototype,"setTerm"),j.prototype),Object(Z.a)(j.prototype,"search",[v],Object.getOwnPropertyDescriptor(j.prototype,"search"),j.prototype),j);o.a.render(a.a.createElement(z.a,{store:oe},a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.e47936d0.chunk.js.map