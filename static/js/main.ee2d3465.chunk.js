(this.webpackJsonpmobx04=this.webpackJsonpmobx04||[]).push([[0],{20:function(e,t,n){},28:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(14),o=n.n(s);n(20),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,c,l,u,p,g,h,m,b,y,d,f,O,j,v,S,I,k,C,E,w,P,x,N,H=n(4),B=n(5),_=n(7),M=n(6),z=n(8),D=n(2),L=n(16),R=n.n(L),T=Object(D.b)("store")(i=Object(D.c)(i=function(e){function t(e){var n;return Object(H.a)(this,t),(n=Object(_.a)(this,Object(M.a)(t).call(this,e))).onChangeHandler=function(e){n.props.store.setTerm(e.target.value)},n.search=function(){n.setState({isSearchVisible:!1}),n.props.store.resetCurrentSong(),console.log("Searching"),n.props.store.search()},n.onKeyUpHandler=function(e){console.log(n.props),13===e.keyCode&&n.props.store.term&&n.search()},n.searchButtonHandler=function(){var e=n.state.isSearchVisible;n.props.store.term&&(e?n.search():n.setState({isSearchVisible:!0}))},n.state={isSearchVisible:!1},n}return Object(z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store,n=t.term,r=R()({search__input:!0,"search__input--hide":!this.state.isSearchVisible&&"compleated"===t.status});return a.a.createElement("nav",null,a.a.createElement("div",{className:"left"}),a.a.createElement("div",{className:"right"},a.a.createElement("input",{className:r,type:"text",value:n,onChange:this.onChangeHandler,onKeyUp:this.onKeyUpHandler,disabled:"pending"===t.status}),a.a.createElement("i",{className:"material-icons search",onClick:function(){return e.searchButtonHandler()}},"search")))}}]),t}(a.a.PureComponent))||i)||i,V=n(1),q="next",A="prev",U=Object(D.b)("store")(c=Object(D.c)(c=function(e){function t(e){var n;return Object(H.a)(this,t),(n=Object(_.a)(this,Object(M.a)(t).call(this,e))).cancelMusicChange=null,n.step=function(){var e=n.props.store.songInstance;if(e&&e.playing()){var t=e.seek();n.progressRef.current.style.width=(t/e.duration()*100||0)+"%",requestAnimationFrame(n.step)}},n.changeProgressBar=function(){n.props.store.songInstance},n.playButtonHandler=function(){n.props.store.songInstance.play(),n.props.store.setSongPlayingStatus(!0)},n.pauseButtonHandler=function(){n.props.store.songInstance.pause(),n.props.store.setSongPlayingStatus(!1)},n.musicChangeHandler=function(e){var t=n.props.store,r=t.currentSongIndex;switch(e){case q:r=t.currentSongIndex+1;break;case A:r=t.currentSongIndex-1}r<0||r>=t.playList.length||(t.songInstance.stop(),t.setCurrentSongIndex(r),t.setCurrentSong(r,null),t.songInstance.play(),t.setSongPlayingStatus(!0),n.setState({isPlaying:!0}))},n.muteButtonHandler=function(){n.setState((function(e){return{isMuted:!e.isMuted}})),n.props.store.songInstance.mute(n.state.isMuted)},n.resetButtonHandler=function(){n.props.store.songInstance.playing()&&n.props.store.songInstance.seek(0)},n.seekHandler=function(e){var t=n.props.store.songInstance;t.playing()&&t.seek(t.duration()*e)},n._playButtonRef=a.a.createRef(),n.state={isPlaying:!1,isMuted:!0},n.songId=null,n.trackMusicAvailability(),n.progressRef=a.a.createRef(),n}return Object(z.a)(t,e),Object(B.a)(t,[{key:"trackMusicAvailability",value:function(){var e=this;this.cancelMusicChange=Object(V.o)((function(){return e.props.store.currentSong}),(function(t){var n=e.props.store;e.progressRef.current.style.width="0%",n.setMusicInstance(),n.isChoosen&&e.playButtonHandler(),n.songInstance.on("play",(function(){requestAnimationFrame(e.step),e.setState((function(){return{isPlaying:!0}}))})),n.songInstance.on("pause",(function(){e.setState((function(){return{isPlaying:!1}}))})),n.songInstance.on("end",(function(){console.log("end of song listener"),e.musicChangeHandler(q)}))})),Object(V.o)((function(){return e.props.store.playList}),(function(){e.props.store.songInstance&&e.props.store.songInstance.stop(),e.setState((function(){return{isPlaying:!1}}))}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isPlaying,r=t.isMuted,s=this.props.store.currentSong,o=this.props.store,i=o.currentSongIndex,c=void 0===i?0:i,l=o.playList,u=void 0===l?[]:l;return a.a.createElement("div",{className:"player-ui"},a.a.createElement("div",{className:"title"},a.a.createElement("h3",{className:"promo-title"},s?s.title:"")),a.a.createElement("div",{className:"small"},a.a.createElement("i",{className:"material-icons",onClick:function(){return e.resetButtonHandler()}},"replay"),a.a.createElement("p",null,s?s.artist.name:""),a.a.createElement("i",{className:"material-icons",onClick:function(){return e.muteButtonHandler()}},"volume_",r?"up":"off")),a.a.createElement("div",{className:"progress",onClick:function(t){return e.seekHandler(t.clientX/window.innerWidth)}},a.a.createElement("div",{className:"played",ref:this.progressRef,onClick:function(e){return console.log(e)}})),a.a.createElement("div",{className:"controls"},a.a.createElement("i",{className:"material-icons",onClick:function(){return e.musicChangeHandler(A)}},"skip_previous"),n?a.a.createElement("i",{className:"material-icons",onClick:this.pauseButtonHandler},"pause"):a.a.createElement("i",{className:"material-icons",ref:this._playButtonRef,onClick:this.playButtonHandler},"play_arrow"),a.a.createElement("i",{className:c!==u.length-1?"material-icons":"material-icons material-icons__disable",onClick:function(){return e.musicChangeHandler(q)}},"skip_next")))}},{key:"componentWillUnmount",value:function(){this.cancelMusicChange()}}]),t}(a.a.PureComponent))||c)||c,W=Object(D.b)("store")(l=Object(D.c)(l=function(e){function t(){var e;return Object(H.a)(this,t),(e=Object(_.a)(this,Object(M.a)(t).call(this))).playButtonHandler=function(){var t=e.props,n=t.store,r=t.index;n.chooseSong(r),n.songInstance.playing()&&n.currentSongIndex===r?(n.songInstance.pause(),n.setSongPlayingStatus(!1)):(n.songInstance.play(),n.setSongPlayingStatus(!0))},e.state={isPlaying:!1},e}return Object(z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.index,s=R()({"material-icons":!0,"play-button":!0,red600:n.currentSongIndex===r});return a.a.createElement("div",{className:"state"},a.a.createElement("i",{className:s,onClick:function(){return e.playButtonHandler()}},n.currentSongIndex===r&&n.isPlaying?"pause":"play_arrow"))}}]),t}(a.a.PureComponent))||l)||l,K=Object(D.b)("store")(u=Object(D.c)(u=function(e){function t(){return Object(H.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(B.a)(t,[{key:"artistNameHandler",value:function(e){this.props.store.resetCurrentSong(),this.props.store.search(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.song,r=t.index,s=(t.store,n.title),o=n.artist;return a.a.createElement("div",{className:"song"},a.a.createElement("div",{className:"info"},a.a.createElement("img",{className:"img second",alt:s,src:n.album.cover_small,width:"60",height:"60"}),a.a.createElement("div",{className:"titles"},a.a.createElement("h5",null,s||"no title"),a.a.createElement("p",{className:"artist-name",onClick:function(t){return e.artistNameHandler(t.target.innerText)}},o.name?o.name:"no name"))),a.a.createElement(W,{index:r}))}}]),t}(a.a.PureComponent))||u)||u,F=n(52),J=Object(D.b)("store")(p=Object(D.c)(p=function(e){function t(){return Object(H.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.store,t=e.isEmpty,n=e.playList,r=e.status;return console.log(t,n,r),a.a.createElement("div",{className:"music"},t&&"pending"===r?a.a.createElement(F.a,{variant:"query"}):null,t&&"compleated"===r?a.a.createElement("p",{className:"result"},"No results found"):null,n.map((function(e,t){return t>0?a.a.createElement(K,{key:e.id,index:t,song:e}):null})))}}]),t}(a.a.PureComponent))||p)||p,X=Object(D.b)("store")(g=Object(D.c)(g=function(e){function t(){return Object(H.a)(this,t),Object(_.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e={backgroundImage:this.props.store.currentSong?"url(".concat(this.props.store.currentSong.album.cover_medium,")"):""};return a.a.createElement("div",{className:"player"},a.a.createElement("div",{className:"cover",style:e}),a.a.createElement(T,null),a.a.createElement(U,null),a.a.createElement("div",{className:"btn"}),a.a.createElement(J,null))}}]),t}(a.a.PureComponent))||g)||g,Z=n(9),$=n.n(Z),G=n(12),Q=n(10),Y=n(3),ee=(n(39),n(40),"".concat("https://cors-anywhere.herokuapp.com/","https://api.deezer.com/"),n(17)),te=function e(t,n){var r=this;Object(H.a)(this,e),this.setPlayer=function(){var e=new ee.Howl({src:[r.songSrc]});return r.songInstance=e,e},this.step=function(){var e=r.songInstance.seek()||0;console.log(e)},this.index=t,this.songSrc=n,this.songInstance=null},ne=new(h=V.f.bound,m=V.f.bound,b=V.f.bound,y=V.f.bound,d=V.f.bound,f=V.f.bound,O=V.f.bound,j=V.f.bound,v=function(){function e(){Object(H.a)(this,e),Object(Q.a)(this,"term",S,this),Object(Q.a)(this,"artist",I,this),Object(Q.a)(this,"playList",k,this),Object(Q.a)(this,"status",C,this),Object(Q.a)(this,"currentSong",E,this),Object(Q.a)(this,"currentSongIndex",w,this),Object(Q.a)(this,"songInstance",P,this),Object(Q.a)(this,"isChoosen",x,this),Object(Q.a)(this,"isPlaying",N,this),this.search()}return Object(B.a)(e,[{key:"setSongPlayingStatus",value:function(e){this.isPlaying=e}},{key:"setCurrentSongIndex",value:function(e){this.currentSongIndex=e}},{key:"setCurrentSong",value:function(e,t){if(e>=0){var n=this.playList[e];return this.currentSong=n}var r=this.playList.find((function(e){return e.id===t}));return this.currentSong=r}},{key:"chooseSong",value:function(e){this.currentSongIndex!==e&&(this.songInstance.stop(),this.setCurrentSongIndex(e),this.setCurrentSong(e),this.isChoosen=!0)}},{key:"setMusicInstance",value:function(){var e=new te(this.currentSongIndex,this.currentSong.preview);return this.songInstance=e.setPlayer()}},{key:"resetCurrentSong",value:function(){try{this.songInstance.stop(),this.songInstance=null,this.currentSongIndex=0}catch(e){console.log(e)}}},{key:"isEmpty",get:function(){return 0===this.playList.length}}]),Object(B.a)(e,[{key:"setTerm",value:function(e){e!==this.term&&(this.term=e)}},{key:"search",value:function(){var e=Object(G.a)($.a.mark((function e(){var t,n,r=this,a=arguments;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:this.term){e.next=3;break}return e.abrupt("return");case 3:try{this.status="pending",n=function(e){Object(V.p)((function(){r.playList=e.data,r.status="compleated",r.currentSong=e.data[0]}))},DZ.api("search?q=".concat(t,"&&index=0&limit=10"),(function(e){console.log("Nam",e),n(e)}))}catch(s){console.log(s)}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),S=Object(Y.a)(v.prototype,"term",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"\u0413\u043e\u0434 \u0437\u043c\u0435\u0438"}}),I=Object(Y.a)(v.prototype,"artist",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=Object(Y.a)(v.prototype,"playList",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=Object(Y.a)(v.prototype,"status",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=Object(Y.a)(v.prototype,"currentSong",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(Y.a)(v.prototype,"currentSongIndex",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=Object(Y.a)(v.prototype,"songInstance",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(Y.a)(v.prototype,"isChoosen",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Object(Y.a)(v.prototype,"isPlaying",[V.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(Y.a)(v.prototype,"isEmpty",[V.g],Object.getOwnPropertyDescriptor(v.prototype,"isEmpty"),v.prototype),Object(Y.a)(v.prototype,"setSongPlayingStatus",[h],Object.getOwnPropertyDescriptor(v.prototype,"setSongPlayingStatus"),v.prototype),Object(Y.a)(v.prototype,"setCurrentSongIndex",[m],Object.getOwnPropertyDescriptor(v.prototype,"setCurrentSongIndex"),v.prototype),Object(Y.a)(v.prototype,"setCurrentSong",[b],Object.getOwnPropertyDescriptor(v.prototype,"setCurrentSong"),v.prototype),Object(Y.a)(v.prototype,"chooseSong",[y],Object.getOwnPropertyDescriptor(v.prototype,"chooseSong"),v.prototype),Object(Y.a)(v.prototype,"setMusicInstance",[d],Object.getOwnPropertyDescriptor(v.prototype,"setMusicInstance"),v.prototype),Object(Y.a)(v.prototype,"resetCurrentSong",[f],Object.getOwnPropertyDescriptor(v.prototype,"resetCurrentSong"),v.prototype),Object(Y.a)(v.prototype,"setTerm",[O],Object.getOwnPropertyDescriptor(v.prototype,"setTerm"),v.prototype),Object(Y.a)(v.prototype,"search",[j],Object.getOwnPropertyDescriptor(v.prototype,"search"),v.prototype),v);o.a.render(a.a.createElement(D.a,{store:ne},a.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.ee2d3465.chunk.js.map